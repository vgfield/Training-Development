---
title: "Version Control"
author: "Victoria Field"
date: "6/29/2020"
output:
  html_document:
    toc: true
    toc_float: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

# Version Control with Git and GitHub

**Purpose** Full synthesis of version control using Git, GitHub, and RStudio. This training document is meant to be distributed to graduate students and researchers who wish to optimize productivity by integrating version control into their workflow 

## Why version control?

- How do you keep track of your project history and versions?

- Hopefully, not like I did.

Looking from the root project folder
![](./images/slide 1.png)

When we open up the catch-all folder, it's neither pretty nor organized

![](./images/slide 2.png)

It's one thing to get away with this workflow when you are only responsible for one or two projects at a time and you're not collaborating often, however; optimizing your workflow with version control will save you a lot of time, hassel, and the heartache of losing valuable code. 

## Version Control 

- This is the best way to organize and manage versions of your project 

- Think of version control as an unlimited 'undo' button

![ ](./images/version control graphic 1.png)

![ ](./images/version control graphic 2.png)

## Git and GitHub

**Git** is a *version control system* originally created for developers to collaborate on large software projects. Git tracks changes in the project over time so that there is always a comprehensive, structured record of the project. Each project is stored in a repository that includes all files that are part of the project.

**GitHub** has become the largest *hoster of Git repositories* and includes many useful features beyond the standard Git functions.This is the interface where you can easily collaborate and navigate changes made by you or collaborators.

## Getting Started 

You will need to create a [GitHub account](https://github.com/) and dowload [Git](https://git-scm.com/downloads)

## Check for Git in RStudio

- Open/re-start RStudio

- *File > New Project* Is there an option to create from Version Control? 

- Select *New Directory > Empty Project.* Is there a "Create a git repository" option?

- Name your project. Look for the "Git" tab in the upper right pane

- If everything checks out, you can delete this project

## If you don't see that

- Open a new [shell](https://cfss.uchicago.edu/setup/shell/) 

- From RStudio: *Tools > Shell*

- Input

  - **Mac** `which git`
  
  - **Windows** `where git`
  
## Initialize new project 

- The basic workflow described here create a project repository on GitHub

- Then, you *clone*, or copy, that repository to your local computer

- As you make *commits*, or changes, to the repository on your computer, you will then *push*, or upload, annotated changes to your GitHub repository

### Make a new repository on Github

- From homepage
  
  - *New Repository*
  
  - Check *initialize this repository with a README*
 
  - *Create Repository*
  
  - Copy the HTTPS close URL using *Clone or Download* 
  
  
### Initialize clone repository in RStudio 

- In RStudio 

  - *File > New Project > Version Control > Git*
  
  - In "repository URL", paste the URL that you just copied
  
  - Decide on your project pathway
  
![1](./images/New Project wizard.png)
![2](./images/Create new project pathway.png)
![3](./images/new project folder created.png)

### Recap

- We created a repository in GitHub. I like to picture this a cloud or screen above me. It's always there, but I never work directly on it. 

- We used RStudio to clone the repository to our personal screens. I always work on my own screen, and then send these new versions to GitHub.

- By following these steps, we now have all these things simultaneously: 

  - A cloned Git repository that is linked to the GitHub repository
  
  - A new folder (directory) where everything related to our project will live 
  
  - A new RStudio Project (for more information on R projects, click [here](https://r4ds.had.co.nz/workflow-projects.html))
  
![ ](./images/new project folder.png)

### Make your first commit (change) 

- In RStudio, we could open the `README.md`

  - Navigate to the File pane of RStudio and click **README.md** to open 
  
  - Add a line and write whatever you want

  - Save to your local workspace

![](./images/edit README.png)
### Commit and push to GitHub

- Now that you've saved that change to your local computer, you need to commit it and push it to your GitHub repository

- Click the **Git** tab in the upper right pane. Based on the status, you can see the pending change to `README.md`

- Check "Staged"

![](./images/stage commit.png)

- A new window pops up to show you the changes

- When writing a commit message, focus more on explaining WHY you made the change, not WHAT change you made

  - This isn't so important here, but plays a bigger role when you're collaborating or trying to keep track of your own analysis
  
  - The commit itself already shows HOW you changed the code, but the commit message tells you WHY
  
![](./images/commit.png)

- Push the commit to GitHub 

![](./images/git push.png)

  - in general you will push less often than you commit
  
-**Note**: especially when you are working with collaborators, you will want to 'Pull' from GitHub before you 'Push' to ensure you are working with the most updated version (e.g., if a collaborator made an addition to the script this morning, you should Pull it before you start your edits)
- Open a new script file 

  - I personally like to script in RMarkdown (.Rmd)

## Real-world example 

Okay, we know how to create a GitHub repository, clone it to our computers, make local changes, and send it all back up to GitHub.

Now, we're going to go through an example of a real workflow 

### Open a new scripting file

- Within the same project you just created, open a new scripting file 

  - I personally prefer to script in a markdown document (.Rmd)
  
- Save the new file to your working directory (i.e., the new folder you created)

- Check that your new file is saved in the correct directory 

![](./images/new doc.png)
